"addbuttons = function(data,d3e) {\n  \n  //var buttons = this.g.append('g').attr('class','buttons');\n  //buttondata = {buttons:[{name:'Start/Stop',state:'Ready',callback:function() {\n  //  d3.event.stopPropagation();\n  //  self.startstop()\n  //})]};\n  //gridbuttons.addbuttons(buts,buttons)\n\n  var fillstate = {ready:'#d9534f',disabled:'#dddddd'};\n  var h = data.height || 40;\n  var w = data.width || 160;\n  var x = data.x || 100;\n  var y = data.y || 0;\n  var buff = data.buffer || 10;\n  for (var ii in data.buttons) {\n    var bdat = data.buttons[ii];\n    y += h+buff;\n    var rattr = {width:w,height:h,x:x,y:y,stroke:'white',cursor:'pointer'};\n    var rstyle = {fill:fillstate[bdat.state]};\n    var g = d3e.append('g');\n    var rect = g.append('rect').attr(rattr).style(rstyle);\n    if (bdat.state=='ready' && bdat.hasOwnProperty('callback')) {\n      rect.on('click', bdat.callback);\n    }\n    var text = g.append('text')\n      .attr({x:x+w/2,y:y+h/2,fill:'white','text-anchor':'middle','pointer-events':'none'});\n    var label = bdat.label.split('\\n');\n    var off = (0.3 - 0.6*(label.length-1)).toFixed(2)+\"em\";\n    for (var jj=0; jj<label.length; jj++) {\n      var dy = (jj===0) ? off : \"1.2em\";\n      text.append('tspan').attr({x:x+w/2,dy:dy}).text(label[jj]);\n    }\n  }\n\n};"